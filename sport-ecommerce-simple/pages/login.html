<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng Nhập - SportZone</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/auth.css" />
  </head>
  <body>
    <!-- Header: Giống header trang chủ -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <span class="logo-icon">⚡</span>
            <a href="../index.html" class="logo-text">SportZone</a>
          </div>

          <nav class="nav">
            <a href="../index.html" class="nav-link">Trang Chủ</a>
            <a href="../index.html#products" class="nav-link">Sản Phẩm</a>
          </nav>

          <div class="header-actions">
            <a href="login.html" class="btn btn-outline">Đăng Nhập</a>
            <a href="register.html" class="btn btn-primary">Đăng Ký</a>
          </div>
        </div>
      </div>
    </header>

    <!-- Nội Dung Chính: Form Đăng Nhập -->
    <main class="main-content">
      <div class="auth-page">
        <div class="auth-container">
          <div class="auth-card">
            <!-- Tiêu Đề Đăng Nhập -->
            <div class="auth-header">
              <h1>Đăng nhập</h1>
              <p>Đăng nhập vào tài khoản của bạn để tiếp tục mua sắm</p>
            </div>

            <!-- Form Đăng Nhập -->
            <form id="loginForm" class="auth-form" onsubmit="return false;">
              <!-- Nhập Email hoặc Họ Tên -->
              <div class="form-group">
                <label for="email" class="form-label">
                  Email hoặc Họ Tên <span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="email"
                  name="email"
                  class="form-input"
                  placeholder="Nhập email hoặc họ tên đã đăng ký"
                  required
                />
                <span class="error-message" id="emailError"></span>
              </div>

              <!-- Nhập Mật Khẩu -->
              <div class="form-group">
                <label for="password" class="form-label">
                  Mật Khẩu <span class="required">*</span>
                </label>
                <input
                  type="password"
                  id="password"
                  name="password"
                  class="form-input"
                  placeholder="Nhập mật khẩu của bạn"
                  required
                />
                <span class="error-message" id="passwordError"></span>
              </div>

              <!-- Tùy Chọn Form -->
              <div class="form-options">
                <label class="checkbox-label">
                  <input type="checkbox" />
                  <span>Ghi nhớ đăng nhập</span>
                </label>
                <a href="#" class="forgot-link">Quên mật khẩu?</a>
              </div>

              <!-- Nút Gửi: type="button" để tránh submit reload -->
              <button
                type="button"
                class="btn btn-primary btn-block"
                onclick="dangNhap()"
              >
                Đăng nhập
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <script>
      // Hàm đơn giản cho đăng nhập (BEGINNER)
      function dangNhap() {
        // Lấy dữ liệu từ form
        var inputTaiKhoan = document.getElementById("email").value.trim();
        var matKhau = document.getElementById("password").value;

        // Lấy dữ liệu đã lưu khi đăng ký
        var tenDaDangKy = localStorage.getItem("username"); // dạng "Họ Tên"
        var emailDaDangKy = localStorage.getItem("email");
        var matKhauDaDangKy = localStorage.getItem("password");

        // Kiểm tra rỗng
        if (!inputTaiKhoan || !matKhau) {
          alert("Vui lòng nhập đầy đủ thông tin");
          return;
        }

        // So sánh: cho phép login bằng username (Họ Tên) hoặc email
        var taiKhoanHopLe =
          (tenDaDangKy && inputTaiKhoan === tenDaDangKy) ||
          (emailDaDangKy && inputTaiKhoan === emailDaDangKy);

        if (taiKhoanHopLe && matKhau === matKhauDaDangKy) {
          // Đăng nhập thành công: đánh dấu trạng thái
          localStorage.setItem("trangThai", "daDangNhap");
          alert("Đăng nhập thành công!");
          // Quay về trang chủ (index.html nằm ở thư mục cha)
          window.location.href = "../index.html";
        } else {
          alert("Tên tài khoản/email hoặc mật khẩu không đúng");
        }
      }
    </script>
  </body>
</html>
